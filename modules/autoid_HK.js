const speciesRules=[{name:"Hipposideros gentilis",rules:[{callType:"CF-FM, FM-CF-FM",cfStart:[120,130],duration:[5,10],harmonic:[0,1,2,3]}]},{name:"Hipposideros armiger",rules:[{callType:"CF-FM, FM-CF-FM",cfStart:[65,72],duration:[10,18]}]},{name:"Rhinolophus pusillus",rules:[{callType:"FM-CF-FM",cfStart:[100,110],duration:[30,70]}]},{name:"Rhinolophus sinicus",rules:[{callType:"FM-CF-FM",cfStart:[75,87],duration:[30,70]}]},{name:"Rhinolophus affinis",rules:[{callType:"FM-CF-FM",cfStart:[68,75],duration:[30,80]}]},{name:"Pipistrellus tenuis",rules:[{callType:"QCF, FM-QCF",bandwidth:[.1,5],lowestFreq:[39,43.5],duration:[6.5,10]},{callType:"FM-QCF",bandwidth:[5.1,20],highestFreq:[44.1,62],lowestFreq:[39,42],duration:[5,9]},{callType:"FM-QCF",bandwidth:[20.1,40],highestFreq:[60.1,82],lowestFreq:[40,42],duration:[5,8]},{callType:"FM, FM-QCF",bandwidth:[40.1,70],highestFreq:[82.1,115],lowestFreq:[42,45],duration:[3,7]}]},{name:"Pipistrellus abramus",rules:[{callType:"QCF",lowestFreq:[44,46]},{callType:"FM-QCF",lowestFreq:[46,50],highestFreq:[60,100],kneeFreq:[46,53],kneeLowBandwidth:[0,5],duration:[3,6]}]},{name:"Tylonycteris fulvida",rules:[{callType:"QCF",bandwidth:[2,5],lowestFreq:[49,54],duration:[5,8.5]},{callType:"FM, FM-QCF",bandwidth:[5.1,15],highestFreq:[54.6,70],lowestFreq:[49.5,57],duration:[6,11]},{callType:"FM, FM-QCF",bandwidth:[15.1,45],highestFreq:[65.1,92],lowestFreq:[49.5,55],duration:[6,11]},{callType:"FM, FM-QCF",bandwidth:[15.1,60],highestFreq:[70,115],lowestFreq:[55.1,60],duration:[5,7]}]},{name:"Hypsugo pulveratus",rules:[{callType:"QCF",lowestFreq:[32,36],harmonic:[0,1,2,3]}]},{name:"Pipistrellus ceylonicus",rules:[{callType:"QCF",lowestFreq:[30,32],harmonic:[0,1,2,3]}]},{name:"Nyctalus plancyi",rules:[{callType:"QCF",lowestFreq:[17.5,21],harmonic:[0,1,2,3]}]},{name:"Mops plicatus",rules:[{callType:"QCF",lowestFreq:[17.5,21],harmonic:[0,1,2,3]},{callType:"QCF",lowestFreq:[13,16.5],harmonic:[0,1,2,3]}]},{name:"Taphozous melanopogon",rules:[{callType:"QCF",lowestFreq:[24.5,26],harmonic:[0,1,2,3]}]}];function inRange(e,r){if(null==e||isNaN(e))return!1;if(Array.isArray(r[0]))return r.some((r=>inRange(e,r)));if("string"==typeof r[0]&&1===r.length){const e=r[0].match(/^(=|=>|>=|<|<=|>)\s*(\w+)$/);if(e){return{op:e[1],refField:e[2]}}}const[l,t]=r;return e>=l&&e<=t}export function autoIdHK(e={}){const r=["highestFreq","lowestFreq","kneeFreq","heelFreq","startFreq","endFreq","cfStart","cfEnd","duration","bandwidth","kneeLowTime","kneeLowBandwidth","heelLowBandwidth","kneeHeelBandwidth"],l=speciesRules.filter((l=>l.rules.some((l=>{if(l.callType){if(!l.callType.split(",").map((e=>e.trim())).includes(e.callType))return!1}return!(l.harmonic&&!l.harmonic.includes(e.harmonic))&&r.every((r=>{if(!l[r])return!0;if("string"==typeof l[r][0]&&1===l[r].length){const t=l[r][0].match(/^(=|=>|>=|<|<=|>)\s*(\w+)$/);if(t){const l=t[1],a=t[2],n=e[r],i=e[a];if(null==n||null==i||isNaN(n)||isNaN(i))return!1;switch(l){case"=":return n===i;case">":return n>i;case"<":return n<i;case">=":case"=>":return n>=i;case"<=":case"=<":return n<=i;default:return!1}}}return inRange(e[r],l[r])}))})))).map((e=>e.name));return l.length?l.join(" / "):"No species matched"}